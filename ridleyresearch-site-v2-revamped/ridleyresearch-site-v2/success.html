<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>You're in — Ridley Research</title>
  <link rel="stylesheet" href="styles.css?v=9">
  <style>
    .success-container {
      min-height: 80vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      text-align: center;
      padding: 2rem;
    }
    .success-icon {
      font-size: 4rem;
      margin-bottom: 1.5rem;
    }
    .success-container h1 {
      font-size: 2.5rem;
      margin-bottom: 1rem;
      color: var(--accent, #7aa2ff);
    }
    .success-container p {
      font-size: 1.1rem;
      color: #ccc;
      max-width: 520px;
      line-height: 1.7;
      margin-bottom: 1rem;
    }
    .success-container .next-steps {
      background: rgba(122, 162, 255, 0.08);
      border: 1px solid rgba(122, 162, 255, 0.2);
      border-radius: 12px;
      padding: 1.5rem 2rem;
      margin: 2rem 0;
      text-align: left;
      max-width: 520px;
      width: 100%;
    }
    .success-container .next-steps h3 {
      margin-bottom: 0.75rem;
      font-size: 1rem;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      color: var(--accent, #7aa2ff);
    }
    .success-container .next-steps li {
      color: #ccc;
      margin-bottom: 0.5rem;
      font-size: 0.95rem;
    }
    .btn-home {
      display: inline-block;
      margin-top: 1rem;
      padding: 0.75rem 2rem;
      background: var(--accent, #7aa2ff);
      color: #0a0e1a;
      font-weight: 600;
      border-radius: 8px;
      text-decoration: none;
      transition: opacity 0.2s;
    }
    .btn-home:hover { opacity: 0.85; }
    #verify-status { color: #888; font-size: 0.9rem; margin-top: 0.5rem; }
  </style>

  <meta property="og:title" content="You're in — Ridley Research" />
  <meta property="og:description" content="Ridley Research & Consulting builds practical AI systems and workflow automation for growing teams." />
  <meta property="og:image" content="https://ridleyresearch.com/rr-mark.png" />
  <meta property="og:url" content="https://ridleyresearch.com/success" />
  <meta property="og:type" content="website" />
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="You're in — Ridley Research" />
  <meta name="twitter:description" content="Ridley Research & Consulting builds practical AI systems and workflow automation for growing teams." />
  <meta name="twitter:image" content="https://ridleyresearch.com/rr-mark.png" />

</head>
<body>
  <nav class="navbar">
    <a href="/" class="brand">Ridley Research</a>
  </nav>

  <div class="success-container">
    <div class="success-icon">✅</div>
    <h1>You're in.</h1>
    <p>Payment confirmed. Your AI Ops Setup Guide is on its way — check your email in the next few minutes.</p>
    <p id="verify-status">Verifying your order...</p>

    <div class="next-steps">
      <h3>What's in the guide</h3>
      <ul>
        <li>Full agent OS setup (OpenClaw, identity, memory architecture)</li>
        <li>Cron automation — what to automate and how</li>
        <li>Telegram integration for always-on messaging</li>
        <li>Cloudflare Pages — deploy your own site in an afternoon</li>
        <li>Workflow automation playbook — the exact stack I use</li>
      </ul>
    </div>

    <div id="download-area"></div>
    <a href="/" class="btn-home">Back to Ridley Research</a>
  </div>

  <script>
    const params = new URLSearchParams(window.location.search);
    const sessionId = params.get('session_id');
    const statusEl = document.getElementById('verify-status');
    const downloadArea = document.getElementById('download-area');

    if (sessionId) {
      fetch(`/checkout?session_id=${sessionId}`)
        .then(r => r.json())
        .then(data => {
          if (data.status === 'paid') {
            statusEl.textContent = data.email ? `Receipt sent to ${data.email}` : 'Payment confirmed.';
            statusEl.style.color = '#7aa2ff';

            if (data.downloadUrl) {
              downloadArea.innerHTML = `
                <a href="${data.downloadUrl}" download class="btn-home" style="margin-bottom:1rem;display:inline-block;background:#7aa2ff;">
                  ⬇ Download Your Guide (PDF)
                </a>
              `;
            }
          } else {
            statusEl.textContent = 'Payment processing — check back in a moment.';
          }
        })
        .catch(() => {
          statusEl.textContent = '';
        });
    } else {
      statusEl.textContent = '';
    }
  </script>

  <script src="chat-widget.js"></script>
</body>
</html>
